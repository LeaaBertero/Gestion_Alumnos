@page "/api/Alumnos"
@inject IHttpServicio http

@* <!DOCTYPE html>
<html>
<head>
    <title>Lista Alumnos</title>

    
    <link href="./css/ListaAlumnos.css" rel="stylesheet" />

    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>

    <header>
        <h1 class="text-center bg-warning fs-1 text shadow p-3 mb-5 bg-body rounded w-75 p-3 mx-auto text-uppercase">Lista de alumnos</h1>
    
        <a class="btn btn-primary" href="api/ListaAlumnos/crear">Cargar nuevo alumno</a>
    </header> 

    <main>
        
        <table>

            <tr>

                <th>Nombre</th>
                <th>Sexo</th>
                <th>FechaNacimiento</th>
                <th>Edad</th>
                <th>Cuil</th>
                <th>Pais</th>
                <th>Provincia</th>
                <th>TituloBase</th>
                <th>Cus</th>
                <th>Estado</th>

            </tr>

            @if (Mensaje == "")
            {
                @if (listaAlumnos == null)
                {
                    <p class="btn btn-primary">Buscando...</p>
                }
                else if (listaAlumnos.Count == 0)
                {
                    <p>No existe la lista de alumnos solicitada</p>
                }
                else
                {
                    @foreach (var item in listaAlumnos)
                    {
                        <tr>
                            <td>@item.Nombre</td>
                            <td>@item.Sexo</td>
                            <td>@item.FechaNacimiento</td>
                            <td>@item.Edad</td>
                            <td>@item.CUIL</td>
                            <td>@item.Pais</td>
                            <td>@item.Provincia</td>
                            <td>@item.TituloBase</td>
                            <td>@item.CUS</td>
                            <td>@item.Estado</td>
                        </tr>
                    }
                }
            }
            else
            {
                <p>Error: @Mensaje</p>
            }

            

        </table>

    </main>

    <footer>
    </footer>



</body>

</html> *@

<!DOCTYPE html>
<html>
<head>
    <title>Lista Alumnos</title>

    <!-- Enlace de CSS personalizado -->
    <link href="./css/ListaAlumnos.css" rel="stylesheet" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

   
</head>

<body>

    <header>
        <h1 class="text-center shadow mb-5">Lista de alumnos</h1>
        <a class="btn btn-primary mb-3" href="api/ListaAlumnos/crear">Cargar nuevo alumno</a>
    </header>

    <main>
        <table class="table table-striped table-hover table-bordered">
            <thead>
                <tr>
                    <th>Nombre</th>
                    <th>Sexo</th>
                    <th>Fecha Nacimiento</th>
                    <th>Edad</th>
                    <th>CUIL</th>
                    <th>País</th>
                    <th>Provincia</th>
                    <th>Título Base</th>
                    <th>CUS</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody>
                @if (Mensaje == "")
                {
                    @if (listaAlumnos == null)
                    {
                        <tr><td colspan="10" class="text-center">Buscando...</td></tr>
                    }
                    else if (listaAlumnos.Count == 0)
                    {
                        <tr><td colspan="10" class="text-center">No existe la lista de alumnos solicitada</td></tr>
                    }
                    else
                    {
                        @foreach (var item in listaAlumnos)
                        {
                            <tr>
                                <td>@item.Nombre</td>
                                <td>@item.Sexo</td>
                                <td>@item.FechaNacimiento</td>
                                <td>@item.Edad</td>
                                <td>@item.CUIL</td>
                                <td>@item.Pais</td>
                                <td>@item.Provincia</td>
                                <td>@item.TituloBase</td>
                                <td>@item.CUS</td>
                                <td>@item.Estado</td>
                            </tr>
                        }
                    }
                }
                else
                {
                    <tr><td colspan="10" class="text-center text-danger">Error: @Mensaje</td></tr>
                }
            </tbody>
        </table>
    </main>

    <footer>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>

</html>


@code {
    List<Alumno> listaAlumnos;
    string Mensaje = "";

    // Task == void (Nota retorna nada)
    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        await Leer();
    }

    private async Task Leer()
    {
        var resp = await http.Get<List<Alumno>>("api/Alumnos");
        string Mensaje = "";

        if (!resp.err)
        {
            listaAlumnos = resp.respuesta;

        }
        else
        {
            Mensaje = await resp.ObtenerError();
        }

    }


}













